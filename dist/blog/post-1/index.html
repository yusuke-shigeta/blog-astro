<!DOCTYPE html><html lang="ja" data-astro-cid-37fxchfa style=""> <head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v5.2.5"><title></title><style>body{margin:0}h1,h2,h3,h4,h5,h6,p,ul,li{padding:0;margin:0;font-weight:400}*{box-sizing:border-box;font-size:16px}html{background-color:#fff;font-family:sans-serif;font-size:.26666666666666666vw}main{width:100%;max-width:1200px;padding:24px 14px 64px;margin:0 auto;line-height:1.4}ul{list-style:none}h1,h2,h3,h4,h5,h6{font-weight:700}h1{font-size:28px}h2{font-size:20px}h3{font-size:18px}@media screen and (min-width: 636px){html{font-size:65%}}h1[data-astro-cid-37fxchfa]{color:var(--mainColor)}.nav-list[data-astro-cid-bbnaetrg]{display:flex;justify-content:center;gap:0 20px;padding:0;list-style-type:none}.header[data-astro-cid-3ef6ksr2]{position:fixed;z-index:999;top:0;right:0;left:0;display:flex;align-items:center;justify-content:space-between;gap:0 20px;width:100%;max-width:1200px;padding:12px 14px;margin:0 auto;background:#fff;box-shadow:0 1px 1px #1e212140,0 0 0 1px #00000014}.title[data-astro-cid-3ef6ksr2]{flex:0 0 75%}footer[data-astro-cid-sz7xmlte]{padding:40px 0;background-color:#3a3c3c;color:#fff;text-align:center}body{background-color:#f5f6f6}main{display:flex;gap:0 20px}h2{border-bottom:1px solid rgb(0 0 0 / 12%);padding:0 0 4px;margin:56px 0 16px;font-size:26px;line-height:1.4}h3{padding:40px 0 16px;font-size:22px}ul{padding-left:1em}ul,ul ul ul ul ul{list-style-type:disc}ul ul ul,ul ul ul ul ul ul ul{list-style-type:square}ul ul,ul ul ul ul,ul ul ul ul ul ul,ul ul ul ul ul ul ul ul{list-style-type:circle}.contents{flex:0 0 75%;border-radius:8px;padding:32px 56px;background-color:#fff}.sidebar{flex:0 1 25%;justify-items:center}.blog-date{margin:8px 0 0}.blog-update{margin:4px 0 0}
.tocs[data-astro-cid-6t6zfk7k]{position:sticky;height:600px;overflow:scroll;list-style-type:none;padding-left:0}.toc[data-astro-cid-6t6zfk7k]:hover .toc-link[data-astro-cid-6t6zfk7k]{font-weight:700}.toc-link[data-astro-cid-6t6zfk7k]{word-break:break-all;color:#0009;font-size:14px;text-decoration:none}.depth-3[data-astro-cid-6t6zfk7k]{margin:0 0 0 10px}.depth-4[data-astro-cid-6t6zfk7k]{margin:0 0 0 20px}
.tags[data-astro-cid-pjkakwps]{display:flex;flex-wrap:wrap;gap:4px;padding-left:0}.tag[data-astro-cid-pjkakwps]{display:flex;align-items:center;justify-content:center;border-radius:4px;background-color:#edeeee}.tag-link[data-astro-cid-pjkakwps]{padding:0 6px;color:#0009;font-size:14px;text-decoration:none}
</style></head> <body data-astro-cid-37fxchfa style="">  <header class="header" data-astro-cid-3ef6ksr2> <h1 class="title" data-astro-cid-3ef6ksr2>AstroのブログをContent管理にする</h1> <nav data-astro-cid-bbnaetrg> <ul class="nav-list" data-astro-cid-bbnaetrg> <li class="nav-item" data-astro-cid-bbnaetrg><a class="nav-link" href="/" data-astro-cid-bbnaetrg>Home</a></li> <li class="nav-item" data-astro-cid-bbnaetrg><a class="nav-link" href="/about/" data-astro-cid-bbnaetrg>About</a></li> <li class="nav-item" data-astro-cid-bbnaetrg><a class="nav-link" href="/blog/" data-astro-cid-bbnaetrg>Blog</a></li> <li class="nav-item" data-astro-cid-bbnaetrg><a class="nav-link" href="/blog/tag/" data-astro-cid-bbnaetrg>Tag</a></li> </ul> </nav>  </header>  <main class="main"> <div class="contents"> <ul class="tags" data-astro-cid-pjkakwps> <li class="tag" data-astro-cid-pjkakwps> <a class="tag-link" href="/blog/tag/astro" data-astro-cid-pjkakwps> astro </a> </li><li class="tag" data-astro-cid-pjkakwps> <a class="tag-link" href="/blog/tag/study" data-astro-cid-pjkakwps> study </a> </li><li class="tag" data-astro-cid-pjkakwps> <a class="tag-link" href="/blog/tag/mdx" data-astro-cid-pjkakwps> mdx </a> </li> </ul>  <p class="blog-date">投稿日: 2025-02-15</p>   <h2 id="mdx-を使用できるように設定">mdx を使用できるように設定</h2>
<p><a href="https://evoworx.dev/blog/hylx27khn/">参考記事</a></p>
<ul>
<li><code>src/content/config.ts</code>を作成</li>
<li>コンテンツを作成
<ul>
<li><code>src/content/blog/240215.mdx</code></li>
</ul>
</li>
<li>mdx を使用可能にする
<ul>
<li><code>npx astro add mdx</code></li>
</ul>
</li>
<li>vscode の設定で mdx を使用可能にする
<ul>
<li><code>.vscode/settings.json</code></li>
</ul>
</li>
</ul>
<h2 id="コンテンツ管理のためルーティング設定">コンテンツ管理のためルーティング設定</h2>
<ul>
<li>コンテンツページを作成
<ul>
<li><code>src/pages/blog/[...slug].astro</code>を作成
<ul>
<li>動的ルーティングさせる</li>
</ul>
</li>
</ul>
</li>
<li>コンテンツ一覧ページを作成
<ul>
<li><code>pages/blog/index.astro</code>
<ul>
<li><code>src/pages/blog.astro</code>とバッティングするため、これ削除</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="コンテンツ管理にできたので目次作って見る">コンテンツ管理にできたので目次作って見る</h2>
<ul>
<li>render を使用し、Content と同様、記事の heading リストを取得する</li>
<li>目次をうまい具合に出力する</li>
</ul>
<h2 id="memo">memo</h2>
<ul>
<li>一旦、frontmatter は使用しない。
<ul>
<li>frontmatter layout も使用しない。</li>
</ul>
</li>
</ul>  </div> <div class="sidebar"> <ul class="tocs" data-astro-cid-6t6zfk7k> <li class="depth-2 toc" data-astro-cid-6t6zfk7k> <a class="toc-link" href="#mdx-を使用できるように設定" data-astro-cid-6t6zfk7k> mdx を使用できるように設定 </a> </li><li class="depth-2 toc" data-astro-cid-6t6zfk7k> <a class="toc-link" href="#コンテンツ管理のためルーティング設定" data-astro-cid-6t6zfk7k> コンテンツ管理のためルーティング設定 </a> </li><li class="depth-2 toc" data-astro-cid-6t6zfk7k> <a class="toc-link" href="#コンテンツ管理にできたので目次作って見る" data-astro-cid-6t6zfk7k> コンテンツ管理にできたので目次作って見る </a> </li><li class="depth-2 toc" data-astro-cid-6t6zfk7k> <a class="toc-link" href="#memo" data-astro-cid-6t6zfk7k> memo </a> </li> </ul>  </div> </main> <footer data-astro-cid-sz7xmlte>フッター</footer>  <script type="module">const e=document.querySelector(".header"),o=document.querySelector(".tocs");document.addEventListener("DOMContentLoaded",()=>{n()});function n(){if(e){const t=e.offsetHeight;o.style.top=`${t+24}px`}}</script>  <script type="module">function r(e,t){if(e){const o=e.offsetHeight;t.style.marginTop=`${o}px`}}const n=document.querySelector(".header"),s=document.querySelector(".main");d();document.addEventListener("DOMContentLoaded",()=>{r(n,s)});function d(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const o=document.querySelector(this.getAttribute("href")),i=n?n.offsetHeight:0,c=o.getBoundingClientRect().top+window.scrollY-i-20;window.scrollTo({top:c,behavior:"smooth"})})})}</script> </body> </html> 