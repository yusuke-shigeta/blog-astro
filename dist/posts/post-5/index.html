<!DOCTYPE html><html lang="ja" data-astro-cid-37fxchfa style=""> <head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v5.2.5"><title>astroで目次つけたい</title><style>a[data-astro-cid-5grsw2hi]{color:#00539f}.tags[data-astro-cid-5grsw2hi]{display:flex;flex-wrap:wrap}.tag[data-astro-cid-5grsw2hi]{margin:.25em;border:dotted 1px #a1a1a1;border-radius:.5em;padding:.5em 1em;font-size:1.15em;background-color:#f8fcfd}
a[data-astro-cid-yxtifmrq]{padding:.5rem 1rem;color:#fff;background-color:#4c1d95;text-decoration:none}footer[data-astro-cid-sz7xmlte]{display:flex;gap:1rem;margin-top:2rem}html{background-color:#f1f5f9;font-family:sans-serif}body{margin:0 auto;width:100%;max-width:80ch;padding:1rem;line-height:1.5}*{box-sizing:border-box}h1{margin:1rem 0;font-size:2.5rem}.nav-links{width:100%;top:5rem;left:48px;background-color:#ff9776;display:none;margin:0}.nav-links a{display:block;text-align:center;padding:10px 0;text-decoration:none;font-size:1.2rem;font-weight:700;text-transform:uppercase}.nav-links a:hover,.nav-links a:focus{background-color:#ff9776}.expanded{display:unset}@media screen and (min-width: 636px){.nav-links{margin-left:5em;display:block;position:static;width:auto;background:none}.nav-links a{display:inline-block;padding:15px 20px}}.hamburger{padding-right:20px;cursor:pointer}.hamburger .line{display:block;width:40px;height:5px;margin-bottom:10px;background-color:#ff9776}@media screen and (min-width: 636px){.hamburger{display:none}}h1[data-astro-cid-37fxchfa]{color:var(--mainColor);font-size:2rem}.skill[data-astro-cid-37fxchfa]{color:#000}
</style></head> <body data-astro-cid-37fxchfa style=""> <header> <nav> <div class="hamburger"> <span class="line"></span> <span class="line"></span> <span class="line"></span> </div> <div class="nav-links"> <a href="/">Home</a> <a href="/about">About</a> <a href="/blog">Blog</a> <a href="/tags">Tag</a> </div> </nav> </header> <h1 data-astro-cid-37fxchfa style="">astroで目次つけたい</h1>  <p data-astro-cid-5grsw2hi><em data-astro-cid-5grsw2hi>Table of Contents, TOCを作ってみる</em></p> <p data-astro-cid-5grsw2hi>2025-02-15</p> <p data-astro-cid-5grsw2hi>著者: Yusuke Shigeta</p> <img src="https://docs.astro.build/assets/full-logo-light.png" width="300" alt="Astroのロゴ。" data-astro-cid-5grsw2hi> <div class="tags" data-astro-cid-5grsw2hi> <p class="tag" data-astro-cid-5grsw2hi> <a href="/tags/astro" data-astro-cid-5grsw2hi>astro</a> </p><p class="tag" data-astro-cid-5grsw2hi> <a href="/tags/study" data-astro-cid-5grsw2hi>study</a> </p> </div> <h1 id="参考記事">参考記事</h1>
<ul>
<li>rehype-tocを使用する方法
<ul>
<li><a href="https://raahii.me/posts/add-toc-to-astro-blog/">参考記事</a></li>
<li><a href="https://docs.astro.build/ja/guides/markdown-content/#markdown%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3">公式サイト</a></li>
</ul>
</li>
<li><a href="https://hypb.dev/articles/astrojs-tocbot/">TocBotを使用する方法</a></li>
<li><a href="https://roboin.io/article/2024/03/03/astro-custom-toc/">astro-custom-tocを使用する方法</a></li>
<li>render()メソッドを使用する方法
<ul>
<li><a href="https://bou7254.com/posts/astro-markdown-blog-toc">参考記事1</a></li>
<li><a href="https://egashira.dev/blog/astrojs-toc">参考記事2</a></li>
<li><a href="https://seless-hw.net/blog/2024/02/14/post/">参考記事3</a></li>
</ul>
</li>
</ul>
<h1 id="コンテンツ管理を動的ページルーティング-コンテンツコレクション">コンテンツ管理を動的ページルーティング コンテンツコレクション？</h1>
<ol>
<li><code>src/pages/[slug].astro</code>を作成</li>
<li>getStaticPathsでルーティング作成</li>
<li>各記事のfrontmatterに<code>slug</code>を追加</li>
<li><code>http://localhost:4321/post-5</code>などにアクセスしてみる</li>
</ol>
<h2 id="astroコマンドをインストール">astroコマンドをインストール</h2>
<ul>
<li>インストールコマンド
<ul>
<li><code>npm install -g astro</code>
<ul>
<li>権限エラーで失敗
<ul>
<li><code>sudo npm install -g astro</code>
<ul>
<li>成功</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>インストールしたバージョンを確認
<ul>
<li><code>astro -v</code>
<ul>
<li><code>v5.3.0 Build faster websites.</code></li>
</ul>
</li>
</ul>
</li>
<li>astroコマンド使用せずとも、.astroディレクトリあるくね？</li>
</ul>
<h1 id="コンテンツ管理にする">コンテンツ管理にする</h1>
<h2 id="参考記事-1">参考記事</h2>
<ul>
<li><a href="https://evoworx.dev/blog/hylx27khn/">参考記事1</a></li>
</ul>
<h2 id="手順">手順</h2>
<ul>
<li><code>src/content/config.ts</code>を作成</li>
<li>コンテンツを作成
<ul>
<li><code>src/content/blog/240215.mdx</code></li>
</ul>
</li>
<li>mdxを使用可能にする
<ul>
<li><code>npx astro add mdx</code></li>
</ul>
</li>
<li>vscodeの設定でmdxを使用可能にする
<ul>
<li><code>.vscode/settings.json</code></li>
</ul>
</li>
<li>コンテンツページを作成
<ul>
<li><code>src/pages/blog/[...slug].astro</code>を作成
<ul>
<li>動的ルーティングさせる</li>
</ul>
</li>
</ul>
</li>
<li>コンテンツ一覧ページを作成
<ul>
<li><code>pages/blog/index.astro</code>
<ul>
<li><code>src/pages/blog.astro</code>とバッティングするため、これ削除
<ul>
<li>一旦バックアップ</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>---</span></span>
<span class="line"><span>import BaseLayout from "../layouts/BaseLayout.astro";</span></span>
<span class="line"><span>import BlogPost from "../components/BlogPost.astro";</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const allPosts = await Astro.glob("../pages/posts/*.md");</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const pageTitle = "BLOG";</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const mainColor = "red";</span></span>
<span class="line"><span>---</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#x3C;BaseLayout pageTitle={pageTitle} mainColor={mainColor}></span></span>
<span class="line"><span>  &#x3C;ul></span></span>
<span class="line"><span>    {allPosts.map((post) => &#x3C;BlogPost url={post.url} title={post.frontmatter.title} />)}</span></span>
<span class="line"><span>  &#x3C;/ul></span></span>
<span class="line"><span>  &#x3C;pre>{JSON.stringify(allPosts, null, 2)}&#x3C;/pre></span></span>
<span class="line"><span>&#x3C;/BaseLayout></span></span></code></pre>
<ul>
<li>renderを使用し、Contentと共に記事のheadingリストを取得する</li>
<li>目次をうまい具合に出力する</li>
</ul>  <footer data-astro-cid-sz7xmlte> <a href="https://www.git.com/yusuke-shigeta" data-astro-cid-yxtifmrq>git</a>  <a href="https://www.twiiter.com/yusuke-shigeta" data-astro-cid-yxtifmrq>twiiter</a>  <a href="https://www.instagram.com/yusuke-shigeta" data-astro-cid-yxtifmrq>instagram</a>  </footer>  <script type="module">document.querySelector(".hamburger").addEventListener("click",()=>{document.querySelector(".nav-links").classList.toggle("expanded")});</script> </body> </html>  